#!/usr/bin/env python3

import os
import sys
import shutil

# Recursively cd up until either _config.yml is found or we reach /
def getWebsiteRoot():
	path = str(os.getcwd())
	while path != '/':
		if os.path.isfile('./_config.yml') and not os.path.islink('./_config.yml'):
			return path
		else:
			os.chdir('..')
			path = str(os.getcwd())
	raise Exception()


# The entry point
if __name__ == "__main__":

	# first off, check if cwd is in a jekyll directory
	try:
		siteRoot = getWebsiteRoot()
	except:
		print('[draught] Error: this is not a Jekyll website')
		sys.exit()
	
	# Define and parse arguments
	parser = argparse.ArgumentParser()
	#parser.add_argument('mode', choices=['clear', 'c', 'backup', 'b', 'add', 'a'], help='define what mode to execute in')
	#parser.add_argument('files', nargs='*', help='when using cfgbk add, one or more files should be provided')

	args = parser.parse_args()
	
	
	# Act depending on mode selected	
	if args.mode == 'backup' or args.mode == 'b':
		#
	elif args.mode == 'clear' or args.mode == 'c':
		#
	elif args.mode == 'add' or args.mode == 'a':
		#
	
